name = "newsletter-signup"
main = "src/index.js"
compatibility_date = "2024-01-01"

# Disable the default workers.dev subdomain (newsletter-signup.alyssa-fdc.workers.dev)
# All traffic should go through our custom domain instead
workers_dev = false

# Custom domain route - newsletter.thecookieisle.com
# This was also configured in Cloudflare dashboard under Workers & Pages → Settings → Domains & Routes
routes = [
  { pattern = "newsletter.thecookieisle.com/*", zone_name = "thecookieisle.com" }
]

[vars]
# Non-secret configuration - safe to commit
# Add your allowed origins (comma-separated for multiple)
ALLOWED_ORIGINS = "https://cookieisle.com,https://www.cookieisle.com,https://thecookieisle.com,https://www.thecookieisle.com,http://localhost:1313"

# Secrets are added via CLI - DO NOT put actual secrets here!
# Run these commands after deployment:
#   wrangler secret put GOOGLE_APPS_SCRIPT_URL
#   wrangler secret put UNSUBSCRIBE_SECRET
#
# GOOGLE_APPS_SCRIPT_URL: The web app URL from your deployed Apps Script
#   (looks like: https://script.google.com/macros/s/xxx/exec)
#
# UNSUBSCRIBE_SECRET: A random 32+ character string for HMAC token generation
#   Must match CONFIG.unsubscribeSecret in google-apps-script.js
